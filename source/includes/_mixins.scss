// Mixins

// Clearfix: For clearing floats like a boss

%clearfix {
    zoom: 1;

    &:before,
    &:after {
        content: '';
        display: table;
    }

    &:after {
        clear: both;
    }
}

.cf { @extend %clearfix; }

%reset {
    margin: 0;
    padding: 0;
}

// With this, the element will ignore user interaction

%ignore-interaction {
    pointer-events: none;
}

// Bulletproof font-face technique by Paul Irish (http://is.gd/sPTEJj)

@mixin font-face ($name, $path) {
    @font-face {
        font-family: $name;
        font-style: normal;
        font-weight: normal;
        src: url('#{$path}#{$name}.eot?#iefix') format('embedded-opentype'),
        url('#{$path}#{$name}.ttf') format('truetype'),
        url('#{$path}#{$name}.woff') format('woff'),
        url('#{$path}#{$name}.svg#@{name}') format('svg');
    }
}

// Image replacement for background-image

%hidden-text {
    // First technique by Scott Kellman

    // overflow: hidden;
    // text-indent: 100%;
    // white-space: nowrap;

    // Second technique by Nicolas Gallagher

    color: transparent;
    font: 0/0 a;
    text-shadow: none;
}

.u-hidden-text { @extend %hidden-text; }

// Smooth font rendering

%smooth-font {
    -webkit-font-smoothing: antialiased;
    text-rendering: optimizeLegibility;
    text-shadow: 1px 1px 1px rgba(color($black), .004);
}

// Our font-family for coding

%code-font {
    font-family: Monaco, Andale Mono, Courier New, monospace;
}

pre,
code,
.code-font {
    @extend %code-font;
}

// Build custom shapes with just CSS

@mixin triangle-shape {
    border: solid transparent;
    height: 0;
    transform: rotate(360deg);
    width: 0;
}

@mixin triangle ($kind, $size, $color) {
    @include triangle-shape;
    @if $kind == 'top'
    {
        border-bottom-color: $color;
        border-width: 0 $size $size;
    } @else if $kind == 'topright'
    {
        border-right-color: $color;
        border-width: 0 ($size * 1.5) $size 0;
    } @else if $kind == 'right'
    {
        border-left-color: $color;
        border-width: $size 0 $size $size;
    } @else if $kind == 'bottomright'
    {
        border-bottom-color: $color;
        border-width: 0 0 $size ($size * 1.5);
    } @else if $kind == 'bottom'
    {
        border-top-color: $color;
        border-width: $size $size 0;
    } @else if $kind == 'bottomleft'
    {
        border-left-color: $color;
        border-width: $size 0 0 ($size * 1.5);
    } @else if $kind == 'left'
    {
        border-right-color: $color;
        border-width: $size $size $size 0;
    } @else if $kind == 'topleft'
    {
        border-top-color: $color;
        border-width: $size ($size * 1.5) 0 0;
    }
}

%responsive-image {
    display: block;
    height: auto; // To keep aspect ratio
    max-width: 100%; // To prevent overflow
    overflow: hidden;
    width: 100%;
}

.u-responsive-image { @extend %responsive-image; }

%responsive-video {
    height: 0;
    margin: 0; // Address margin not present on figure in IE 8/9 and Safari 5
    overflow: hidden;
    position: relative;

    // Creates the 16:9 proportion of the video wrapper

    &,
    &.widescreen {
        padding-bottom: (9 / 16) * 100%;
    }

    // This one, the 4:3 proportion

    &.fullscreen {
        padding-bottom: (3 / 4) * 100%;
    }

    // And finally, the 21:9 proportion

    &.ultrawide {
        padding-bottom: (9 / 21) * 100%;
    }

    iframe,
    object,
    embed {
        height: 100%;
        left: 0;
        position: absolute;
        top: 0;
        width: 100%;
    }
}

.u-responsive-video { @extend %responsive-video; }

// Icons

svg {
    background-color: transparent;
    background-repeat: no-repeat;

    -moz-osx-font-smoothing: grayscale;
    -webkit-font-smoothing: antialiased;

    transform: translate3d(0, 0, 0); // Fix webkit/blink poor rendering issues
}

// Smooth fade-in/out

[class*="u-fade-"] {
    transition: visibility 0s linear .25s, opacity .25s linear;
}

.u-fade-out {
    opacity: 0;
    visibility: hidden;
}

.u-fade-in {
    opacity: 1;
    transition-delay: 0;
    visibility: visible;
}
